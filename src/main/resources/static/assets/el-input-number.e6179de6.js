var ae=Object.defineProperty,ue=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var j=(r,u,i)=>u in r?ae(r,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[u]=i,J=(r,u)=>{for(var i in u||(u={}))oe.call(u,i)&&j(r,i,u[i]);if($)for(var i of $(u))pe.call(u,i)&&j(r,i,u[i]);return r},L=(r,u)=>ue(r,se(u));import{e$ as ce,gF as de,B as be,fQ as me,az as b,fG as fe,fF as _e,eQ as w,ay as he,d as ve,aj as ge,J as Ne,a as we,r as xe,fV as Ve,p as N,aB as y,I as Ie,fJ as ye,K as Ee,V as ke,X as Se,o as _,q as F,al as Q,f as t,y as C,dD as E,e as D,w as R,c as k,f1 as Pe,gG as ze,ag as Y,s as q,f2 as Ae,aA as Fe,an as B,E as Ce,_ as De,G as Be,M as H,aa as Te}from"./index.9ea39232.js";var W={beforeMount(r,u){let i=null,l;const v=()=>u.value&&u.value(),d=()=>{Date.now()-l<100&&v(),clearInterval(i),i=null};ce(r,"mousedown",m=>{m.button===0&&(l=Date.now(),de(document,"mouseup",d),clearInterval(i),i=setInterval(v,100))})}};const Me=be({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,disabled:Boolean,size:me,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||b(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)}}),Ke={[fe]:(r,u)=>r!==u,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[_e]:r=>b(r)||w(r),[he]:r=>b(r)||w(r)},Oe=["aria-label","onKeydown"],Ge=["aria-label","onKeydown"],Ue={name:"ElInputNumber"},$e=ve(L(J({},Ue),{props:Me,emits:Ke,setup(r,{expose:u,emit:i}){const l=r,{t:v}=ge(),d=Ne("input-number"),m=we(),o=xe({currentValue:l.modelValue,userInput:null}),{formItem:h}=Ve(),T=N(()=>b(l.modelValue)&&x(l.modelValue,-1)<l.min),M=N(()=>b(l.modelValue)&&x(l.modelValue)>l.max),X=N(()=>{const e=G(l.step);return y(l.precision)?Math.max(G(l.modelValue),e):(e>l.precision,l.precision)}),S=N(()=>l.controls&&l.controlsPosition==="right"),K=Ie(),g=ye(),Z=N(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(w(e))return"";if(b(e)){if(Number.isNaN(e))return"";y(l.precision)||(e=e.toFixed(l.precision))}return e}),O=(e,n)=>{if(y(n)&&(n=X.value),n===0)return Math.round(e);let a=String(e);const s=a.indexOf(".");if(s===-1||!a.replace(".","").split("")[s+n])return e;const V=a.length;return a.charAt(V-1)==="5"&&(a=`${a.slice(0,Math.max(0,V-1))}6`),Number.parseFloat(Number(a).toFixed(n))},G=e=>{if(w(e))return 0;const n=e.toString(),a=n.indexOf(".");let s=0;return a!==-1&&(s=n.length-a-1),s},x=(e,n=1)=>b(e)?O(e+l.step*n):o.currentValue,P=()=>{if(g.value||M.value)return;const e=l.modelValue||0,n=x(e);A(n)},z=()=>{if(g.value||T.value)return;const e=l.modelValue||0,n=x(e,-1);A(n)},U=(e,n)=>{const{max:a,min:s,step:p,precision:f,stepStrictly:V,valueOnClear:I}=l;let c=Number(e);if(w(e)||Number.isNaN(c))return null;if(e===""){if(I===null)return null;c=Be(I)?{min:s,max:a}[I]:I}return V&&(c=Math.round(c/p)*p),y(f)||(c=O(c,f)),(c>a||c<s)&&(c=c>a?a:s,n&&i("update:modelValue",c)),c},A=e=>{var n;const a=o.currentValue,s=U(e);a!==s&&(o.userInput=null,i("update:modelValue",s),i("input",s),i("change",s,a),(n=h==null?void 0:h.validate)==null||n.call(h,"change").catch(p=>H()),o.currentValue=s)},ee=e=>o.userInput=e,ne=e=>{const n=e!==""?Number(e):"";(b(n)&&!Number.isNaN(n)||e==="")&&A(n),o.userInput=null},re=()=>{var e,n;(n=(e=m.value)==null?void 0:e.focus)==null||n.call(e)},te=()=>{var e,n;(n=(e=m.value)==null?void 0:e.blur)==null||n.call(e)},le=e=>{i("focus",e)},ie=e=>{var n;i("blur",e),(n=h==null?void 0:h.validate)==null||n.call(h,"blur").catch(a=>H())};return Ee(()=>l.modelValue,e=>{o.currentValue=U(e,!0),o.userInput=null},{immediate:!0}),ke(()=>{var e;const{min:n,max:a,modelValue:s}=l,p=(e=m.value)==null?void 0:e.input;if(p.setAttribute("role","spinbutton"),Number.isFinite(a)?p.setAttribute("aria-valuemax",String(a)):p.removeAttribute("aria-valuemax"),Number.isFinite(n)?p.setAttribute("aria-valuemin",String(n)):p.removeAttribute("aria-valuemin"),p.setAttribute("aria-valuenow",String(o.currentValue)),p.setAttribute("aria-disabled",String(g.value)),!b(s)&&s!=null){let f=Number(s);Number.isNaN(f)&&(f=null),i("update:modelValue",f)}}),Se(()=>{var e;const n=(e=m.value)==null?void 0:e.input;n==null||n.setAttribute("aria-valuenow",`${o.currentValue}`)}),u({focus:re,blur:te}),(e,n)=>(_(),F("div",{class:C([t(d).b(),t(d).m(t(K)),t(d).is("disabled",t(g)),t(d).is("without-controls",!e.controls),t(d).is("controls-right",t(S))]),onDragstart:n[0]||(n[0]=B(()=>{},["prevent"]))},[e.controls?Q((_(),F("span",{key:0,role:"button","aria-label":t(v)("el.inputNumber.decrease"),class:C([t(d).e("decrease"),t(d).is("disabled",t(T))]),onKeydown:E(z,["enter"])},[D(t(Y),null,{default:R(()=>[t(S)?(_(),k(t(Pe),{key:0})):(_(),k(t(ze),{key:1}))]),_:1})],42,Oe)),[[t(W),z]]):q("v-if",!0),e.controls?Q((_(),F("span",{key:1,role:"button","aria-label":t(v)("el.inputNumber.increase"),class:C([t(d).e("increase"),t(d).is("disabled",t(M))]),onKeydown:E(P,["enter"])},[D(t(Y),null,{default:R(()=>[t(S)?(_(),k(t(Ae),{key:0})):(_(),k(t(Fe),{key:1}))]),_:1})],42,Ge)),[[t(W),P]]):q("v-if",!0),D(t(Ce),{id:e.id,ref_key:"input",ref:m,type:"number",step:e.step,"model-value":t(Z),placeholder:e.placeholder,disabled:t(g),size:t(K),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[E(B(P,["prevent"]),["up"]),E(B(z,["prevent"]),["down"])],onBlur:ie,onFocus:le,onInput:ee,onChange:ne},null,8,["id","step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown"])],34))}}));var je=De($e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const Qe=Te(je);export{Qe as E,W as v};
