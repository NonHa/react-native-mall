var j=Object.defineProperty,B=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var y=(e,t,o)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,C=(e,t)=>{for(var o in t||(t={}))O.call(t,o)&&y(e,o,t[o]);if(v)for(var o of v(t))P.call(t,o)&&y(e,o,t[o]);return e},w=(e,t)=>B(e,D(t));import{P as R,_ as V}from"./index.8e94c5e3.js";import{d as $,a as k,p as F,V as W,$ as A,aD as N,f as h,e as i,aF as H,Z as T,fp as U,gU as z,cR as K,aN as X,gV as Y,dv as Z,ar as q,aK as G,gR as J,u as Q,o as ee,c as te,w as x,h as I,i as ne,gS as oe}from"./index.9ea39232.js";import{E as le}from"./el-divider.c329bdb5.js";import"./onMountedOrActivated.21e8b91f.js";import"./useWindowSizeFn.4d8673c8.js";import"./useContentViewHeight.c17bf156.js";function ie(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!K(e)}const _="context-menu",se={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},M=e=>{const{item:t}=e;return i("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&i(X,{class:"mr-2",icon:t.icon},null),i("span",null,[t.label])])};var ae=$({name:"ContextMenu",props:se,setup(e){const t=k(null),o=k(!1),c=F(()=>{const{axis:l,items:n,styles:s,width:a}=e,{x:d,y:m}=l||{x:0,y:0},f=(n||[]).length*40,b=a,g=document.body,L=g.clientWidth<d+b?d-b:d,S=g.clientHeight<m+f?m-f:m;return w(C({},s),{position:"absolute",width:`${a}px`,left:`${L+1}px`,top:`${S+1}px`})});W(()=>{A(()=>o.value=!0)}),N(()=>{const l=h(t);l&&document.body.removeChild(l)});function r(l,n){const{handler:s,disabled:a}=l;a||(o.value=!1,n==null||n.stopPropagation(),n==null||n.preventDefault(),s==null||s())}function u(l){return l.map(n=>{const{disabled:s,label:a,children:d,divider:m=!1}=n,f={item:n,handler:r,showIcon:e.showIcon};return!d||d.length===0?i(T,null,[i(U,{disabled:s,class:`${_}__item`,key:a},{default:()=>[i(M,f,null)]}),m?i(le,{key:`d-${a}`},null):null]):h(o)?(console.log("children",d),i(z,{index:a,disabled:s,popperClass:`${_}__popup`},{title:()=>i(M,f,null),default:()=>u(d)})):null})}return()=>{let l;if(!h(o))return null;const{items:n}=e;return i("div",{class:_},[i(H,{mode:"vertical",collapse:!0,ref:t,style:h(c)},ie(l=u(n))?l:{default:()=>[l]})])}}});const p={domList:[],resolve:()=>{}},ce=function(e){const{event:t}=e||{};if(t&&(t==null||t.preventDefault()),!!Y)return new Promise(o=>{const c=document.body,r=document.createElement("div"),u={};e.styles&&(u.styles=e.styles),e.items&&(u.items=e.items),e.event&&(u.customEvent=t,u.axis={x:t.clientX,y:t.clientY});const l=i(ae,u);Z(l,r);const n=function(){p.resolve("")};p.domList.push(r);const s=function(){p.domList.forEach(a=>{try{a&&c.removeChild(a)}catch(d){}}),c.removeEventListener("click",n),c.removeEventListener("scroll",n)};p.resolve=function(a){s(),o(a)},s(),c.appendChild(r),c.addEventListener("click",n),c.addEventListener("scroll",n)})},E=function(){p&&(p.resolve(""),p.domList=[])};function re(e=!0){return q()&&e&&N(()=>{E()}),[ce,E]}const ue=$({components:{CollapseContainer:J,PageWrapper:R},setup(){const[e]=re(),{createMessage:t}=Q();function o(r){e({event:r,items:[{label:"New",icon:"bi:plus",handler:()=>{t.success("click new")}},{label:"Open",icon:"bx:bxs-folder-open",handler:()=>{t.success("click open")}}]})}function c(r){e({event:r,items:[{label:"New",icon:"bi:plus",children:[{label:"New1-1",icon:"bi:plus",divider:!0,children:[{label:"New1-1-1",handler:()=>{t.success("click new")}},{label:"New1-2-1",disabled:!0}]},{label:"New1-2",icon:"bi:plus"}]}]})}return{handleContext:o,handleMultipleContext:c}}}),de=I(" Right Click on me "),pe=I(" Right Click on me ");function me(e,t,o,c,r,u){const l=ne,n=oe,s=V;return ee(),te(s,{title:"\u53F3\u952E\u83DC\u5355\u793A\u4F8B"},{default:x(()=>[i(n,{title:"Simple"},{default:x(()=>[i(l,{type:"primary",onContextmenu:e.handleContext},{default:x(()=>[de]),_:1},8,["onContextmenu"])]),_:1}),i(n,{title:"Multiple",class:"mt-4"},{default:x(()=>[i(l,{type:"primary",onContextmenu:e.handleMultipleContext},{default:x(()=>[pe]),_:1},8,["onContextmenu"])]),_:1})]),_:1})}var ye=G(ue,[["render",me]]);export{ye as default};
