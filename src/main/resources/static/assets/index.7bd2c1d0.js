var L=Object.defineProperty,P=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var V=(s,a,t)=>a in s?L(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,C=(s,a)=>{for(var t in a||(a={}))q.call(a,t)&&V(s,t,a[t]);if(k)for(var t of k(a))H.call(a,t)&&V(s,t,a[t]);return s},z=(s,a)=>P(s,M(a));var E=(s,a,t)=>new Promise((f,o)=>{var R=n=>{try{c(t.next(n))}catch(p){o(p)}},h=n=>{try{c(t.throw(n))}catch(p){o(p)}},c=n=>n.done?f(n.value):Promise.resolve(n.value).then(R,h);c((t=t.apply(s,a)).next())});import{d as K,a as g,r as O,o as Q,q as Z,e as u,w as m,f as e,c8 as j,Z as G,h as b,g$ as J,h0 as W,h1 as X,h2 as Y,i as ee}from"./index.9ea39232.js";import{E as te}from"./el-switch.05966c42.js";import{u as ae,B as oe}from"./useTable.db1db6c5.js";import{r as se,B as ie}from"./useForm.c467aa96.js";import{g as T,a as le,b as ne}from"./userData.47e7f627.js";import{B as re}from"./index.4c756888.js";import{u as ue}from"./product.2dbecb13.js";/* empty css               */import"./el-popper.9aa5ade8.js";/* empty css                  */import"./el-input-number.e6179de6.js";import"./check.8d7cf096.js";import"./dateUtil.648bdb8e.js";import"./useWindowSizeFn.4d8673c8.js";import"./onMountedOrActivated.21e8b91f.js";import"./el-divider.c329bdb5.js";import"./sortable.esm.6991fe44.js";import"./log.b69fc4f1.js";import"./uniqBy.067f2c9d.js";import"./el-form-item.f36f1992.js";import"./uniq.030252d7.js";/* empty css                 */import"./el-space.f4d2670a.js";import"./table.e172cbb0.js";const me=b("\u65B0\u589E"),ce=b("\u5206\u914D\u89D2\u8272"),de=b("\u7F16\u8F91"),fe=b("\u5220\u9664"),Pe=K({__name:"index",setup(s){const{getRoleList:a}=ue(),t=g(!1),f=g(!1),o=g({}),R=g(!1),h=g(0),c=g([]);c.value=T;const n=O({pageSize:10,pageNum:1});let p=J;function S(i,l){h.value=l,l===1?c.value=[{field:"roleIds",label:"\u4E0A\u7EA7\u5206\u7C7B",component:"ElSelect",itemProps:{multiple:!0},searchList:a.map(r=>({title:r.name,field:r.id}))}]:c.value=T,o.value=i&&i.id?i:{status:1},e(f).visibleRef=!0}function w(i){}const[x,v]=se();function A(){}let F=le();F[1].editEvnets={input:A};const[U,{getForm:pe,reload:B}]=ae({api:p,columns:F,useSearchForm:!0,formConfig:C({},ne()),showTableSetting:!0,tableSetting:{fullScreen:!0},showIndexColumn:!1,rowKey:"key",isTreeTable:!0});function $(i){return E(this,null,function*(){return o.value=i,e(o).status=e(o).status===0?1:0,yield y()})}let y=i=>E(this,null,function*(){if(e(h)===1){console.log("modalRef",v.getFieldsValue()),W(C({adminId:e(o).id},v.getFieldsValue())).then(l=>{e(f).visibleRef=!1,B()});return}if(e(o).id){let l=i?z(C({},v.getFieldsValue()),{id:e(o).id}):e(o);yield X(l).then(r=>{if(r)return e(f).visibleRef=!1,B(),!0})}else Y(v.getFieldsValue()).then(l=>{if(l)return e(f).visibleRef=!1,B(),!0});return!1});function D(i,l){o.value=i,e(o).status=0,y()}let N=[];return(i,l)=>{const r=ee;return Q(),Z(G,null,[u(e(oe),{titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:e(F),dataSource:e(N),canResize:t.value,loading:R.value,showTableSetting:"",pagination:n,tableSearchQuery:{pageNum:1,pageSize:50},api:e(p),useSearchForm:"",onColumnsChange:w,onRegister:e(U)},{"form-advanceBefore":m(()=>[u(r,{type:"danger",onClick:S},{default:m(()=>[me]),_:1})]),"col-operate":m(({row:d,column:I})=>[u(r,{size:"small",type:"primary",onClick:_=>S(d,1)},{default:m(()=>[ce]),_:2},1032,["onClick"]),u(r,{size:"small",type:"primary",onClick:_=>S(d,2)},{default:m(()=>[de]),_:2},1032,["onClick"]),u(e(j),{title:"Are you sure to delete this?",onConfirm:_=>D(d)},{reference:m(()=>[u(r,{size:"small",type:"danger"},{default:m(()=>[fe]),_:1})]),_:2},1032,["onConfirm"])]),"col-status":m(({row:d,column:I})=>[u(e(te),{modelValue:d.status,"onUpdate:modelValue":_=>d.status=_,class:"ml-2","active-value":1,"inactive-value":0,"before-change":()=>$(d)},null,8,["modelValue","onUpdate:modelValue","before-change"])]),_:1},8,["columns","dataSource","canResize","loading","pagination","api","onRegister"]),u(e(re),{ref_key:"modalRef",ref:f,onOk:l[0]||(l[0]=d=>e(y)("edit"))},{default:m(()=>[u(e(ie),{onRegister:e(x),model:o.value,schemas:c.value,showActionBtn:!1},null,8,["onRegister","model","schemas"])]),_:1},512)],64)}}});export{Pe as default};
