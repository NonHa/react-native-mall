var Z=Object.defineProperty,G=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var k=(c,d,n)=>d in c?Z(c,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[d]=n,F=(c,d)=>{for(var n in d||(d={}))W.call(d,n)&&k(c,n,d[n]);if(x)for(var n of x(d))X.call(d,n)&&k(c,n,d[n]);return c},I=(c,d)=>G(c,H(d));var w=(c,d,n)=>new Promise((u,_)=>{var A=l=>{try{b(n.next(l))}catch(m){_(m)}},p=l=>{try{b(n.throw(l))}catch(m){_(m)}},b=l=>l.done?u(l.value):Promise.resolve(l.value).then(A,p);b((n=n.apply(c,d)).next())});import{aK as Y,d as P,O as ee,a as f,K as te,f as e,o as D,q as N,e as t,w as a,g as T,h as s,x as r,c as S,Z as U,s as O,E as ae,r as V,b as ue,i as le}from"./index.9ea39232.js";import{u as oe,B as re}from"./useTable.db1db6c5.js";import{_ as se}from"./useForm.c467aa96.js";import{o as ne,f as de,h as ie,i as M}from"./order.c9e7790f.js";import{B as ce}from"./index.4c756888.js";import{E as z}from"./el-card.4c0cfefa.js";import{E as v,a as o}from"./el-descriptions-item.23496ac0.js";import{u as pe}from"./product.2dbecb13.js";/* empty css               */import"./el-popper.9aa5ade8.js";/* empty css                  */import"./el-input-number.e6179de6.js";import"./el-switch.05966c42.js";import"./check.8d7cf096.js";import"./dateUtil.648bdb8e.js";import"./useWindowSizeFn.4d8673c8.js";import"./onMountedOrActivated.21e8b91f.js";import"./el-divider.c329bdb5.js";import"./sortable.esm.6991fe44.js";import"./log.b69fc4f1.js";import"./uniqBy.067f2c9d.js";import"./el-form-item.f36f1992.js";import"./uniq.030252d7.js";/* empty css                 */import"./el-space.f4d2670a.js";import"./useTableFomatter.c95f95bd.js";import"./table.e172cbb0.js";const me=["src"],fe=["src"],_e=P({__name:"returnApplyItemMessage",props:{applyItem:Object},setup(c,{expose:d}){const n=c;let{applyItem:u}=ee(n),_=f({companyAddressId:""}),A=f([]),{getCompanyAddressList:p}=pe();A.value=p.map(g=>({label:g.addressName,value:g.id}));let l=f({province:"",city:"",region:"",detailAddress:"",phone:"",receiveMan:"",handleNote:"",companyAddressId:null,receiveNote:""});const m=g=>{let i=JSON.parse(JSON.stringify(e(p).filter(C=>C.id===g)));e(l).province=i[0].province,e(l).city=i[0].city,e(l).region=i[0].region,e(l).detailAddress=i[0].detailAddress,e(l).phone=i[0].phone,e(l).companyAddressId=i[0].id};return te(()=>e(u).id,g=>{console.log("applyItem",u),e(l).handleNote=e(u).handleNote,e(l).returnAmount=e(u).returnAmount,e(_).companyAddressId=e(u).companyAddressId,e(u).companyAddressId&&m(e(u).companyAddressId)},{immediate:!0}),d({selectAddress:l}),(g,i)=>{const C=ae;return D(),N("div",null,[t(e(z),null,{default:a(()=>[t(e(v),{title:"\u9000\u8D27\u5546\u54C1",direction:"vertical",column:7,border:""},{default:a(()=>[t(e(o),{label:"\u5546\u54C1\u56FE\u7247"},{default:a(()=>[T("img",{src:e(u).productPic},null,8,me)]),_:1}),t(e(o),{label:"\u5546\u54C1\u540D\u79F0"},{default:a(()=>[s(r(e(u).productName),1)]),_:1}),t(e(o),{label:"\u4EF7\u683C/\u8D27\u53F7"},{default:a(()=>[s(r(e(u).productPrice),1)]),_:1}),t(e(o),{label:"\u5C5E\u6027"},{default:a(()=>[s(r(e(u).productAttr),1)]),_:1}),t(e(o),{label:"\u6570\u91CF"},{default:a(()=>[s(r(e(u).productCount),1)]),_:1}),t(e(o),{label:"\u5C0F\u8BA1"},{default:a(()=>[s(r(e(u).productRealPrice),1)]),_:1})]),_:1})]),_:1}),t(e(z),{class:"apply_message_card"},{default:a(()=>[t(e(v),{title:"\u670D\u52A1\u5355\u4FE1\u606F",column:1,border:""},{default:a(()=>[t(e(o),{label:"\u670D\u52A1\u5355\u53F7"},{default:a(()=>[s(r(e(u).id),1)]),_:1}),t(e(o),{label:"\u7533\u8BF7\u72B6\u6001"},{default:a(()=>[s(r(e(u).status),1)]),_:1}),t(e(o),{label:"\u8BA2\u5355\u7F16\u53F7"},{default:a(()=>[s(r(e(u).orderSn),1)]),_:1}),t(e(o),{label:"\u7533\u8BF7\u65F6\u95F4"},{default:a(()=>[s(r(e(u).createTime),1)]),_:1}),t(e(o),{label:"\u7528\u6237\u8D26\u53F7"},{default:a(()=>[s(r(e(u).memberUsername),1)]),_:1}),t(e(o),{label:"\u8054\u7CFB\u4EBA"},{default:a(()=>[s(r(e(u).returnName),1)]),_:1}),t(e(o),{label:"\u8054\u7CFB\u7535\u8BDD"},{default:a(()=>[s(r(e(u).returnPhone),1)]),_:1}),t(e(o),{label:"\u9000\u8D27\u539F\u56E0"},{default:a(()=>[s(r(e(u).reason),1)]),_:1}),t(e(o),{label:"\u95EE\u9898\u63CF\u8FF0"},{default:a(()=>[s(r(e(u).description),1)]),_:1}),t(e(o),{label:"\u51ED\u8BC1\u56FE\u7247"},{default:a(()=>[T("img",{src:e(u).proofPics},null,8,fe)]),_:1})]),_:1}),t(e(v),{column:1,border:""},{default:a(()=>[t(e(o),{label:"\u8BA2\u5355\u91D1\u989D"},{default:a(()=>[s(r(e(u).productPrice),1)]),_:1}),t(e(o),{label:"\u786E\u8BA4\u9000\u6B3E\u91D1\u989D"},{default:a(()=>[t(C,{disabled:e(u).status!==0,modelValue:e(l).returnAmount,"onUpdate:modelValue":i[0]||(i[0]=B=>e(l).returnAmount=B),placeholder:""},null,8,["disabled","modelValue"])]),_:1}),t(e(o),{label:"\u9009\u62E9\u6536\u8D27\u70B9"},{default:a(()=>[t(se,{disabled:e(u).status!==0,model:e(_),field:"companyAddressId",options:e(A),onSelectChange:m},null,8,["disabled","model","options"])]),_:1}),t(e(o),{label:"\u6536\u8D27\u4EBA\u59D3\u540D"},{default:a(()=>[s(r(e(l).receiveMan),1)]),_:1}),t(e(o),{label:"\u6240\u5728\u533A\u57DF"},{default:a(()=>[s(r(e(l).province)+" "+r(e(l).city)+" "+r(e(l).region),1)]),_:1}),t(e(o),{label:"\u8BE6\u7EC6\u5730\u5740"},{default:a(()=>[s(r(e(l).detailAddress),1)]),_:1}),t(e(o),{label:"\u8054\u7CFB\u7535\u8BDD"},{default:a(()=>[s(r(e(l).phone),1)]),_:1})]),_:1}),e(u).status===0?(D(),S(e(v),{key:0,column:1,border:""},{default:a(()=>[t(e(o),{label:"\u5904\u7406\u5907\u6CE8"},{default:a(()=>[t(C,{modelValue:e(l).handleNote,"onUpdate:modelValue":i[1]||(i[1]=B=>e(l).handleNote=B),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})):(D(),N(U,{key:1},[t(e(v),{column:1,border:""},{default:a(()=>[t(e(o),{label:"\u5904\u7406\u4EBA\u5458"},{default:a(()=>[s(r(e(u).handleMan),1)]),_:1}),t(e(o),{label:"\u5904\u7406\u65F6\u95F4"},{default:a(()=>[s(r(e(u).handleTime),1)]),_:1}),t(e(o),{label:"\u5904\u7406\u5907\u6CE8"},{default:a(()=>[s(r(e(u).handleNote),1)]),_:1})]),_:1}),e(u).status!==1&&e(u).status!==3?(D(),S(e(v),{key:0,column:1,border:""},{default:a(()=>[t(e(o),{label:"\u6536\u8D27\u4EBA\u5458"},{default:a(()=>[s(r(e(u).receiveMan),1)]),_:1}),t(e(o),{label:"\u6536\u8D27\u65F6\u95F4"},{default:a(()=>[s(r(e(u).handleTime),1)]),_:1}),t(e(o),{label:"\u6536\u8D27\u5907\u6CE8"},{default:a(()=>[s(r(e(u).receiveNote),1)]),_:1})]),_:1})):O("",!0)],64)),e(u).status===1?(D(),S(e(v),{key:2,column:1,border:""},{default:a(()=>[t(e(o),{label:"\u6536\u8D27\u5907\u6CE8"},{default:a(()=>[t(C,{modelValue:e(l).receiveNote,"onUpdate:modelValue":i[2]||(i[2]=B=>e(l).receiveNote=B),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1})):O("",!0)]),_:1})])}}});var be=Y(_e,[["__scopeId","data-v-0c1cba90"]]);const ge=s("\u67E5\u770B\u8BE6\u60C5"),Ge=P({__name:"returnApply",setup(c){const d=f(!1),n=f(!1),u=V({pageSize:10,pageNum:1});let _=f(),A=f(),p=f({}),b=f(!0),l=f(!0),m=V({cancelText:"",sureText:""}),g=ne;function i(h){p.value=e(h);let y=e(h).status;b.value=!0,l.value=!0,y===0?(m.cancelText="\u62D2\u7EDD\u9000\u8D27",m.sureText="\u786E\u8BA4\u9000\u8D27"):y===1?(b.value=!1,m.sureText="\u786E\u8BA4\u6536\u8D27"):(b.value=!1,l.value=!1),e(_).visibleRef=!0}function C(h){}let B=de();const[$,{getForm:he,reload:R}]=oe({api:g,columns:B,useSearchForm:!0,formConfig:F({},ie()),showTableSetting:!0,tableSetting:{fullScreen:!0},showIndexColumn:!1,rowKey:"key",isTreeTable:!0});function K(h,y){return!0}let J=[];const{getUserInfo:E}=ue();function L(){let h=e(A).selectAddress;M(I(F({},h),{status:e(p).status+1,id:e(p).id,receiveMan:E.username,handleMan:E.username})).then(y=>{y.code===200&&(e(_).visibleRef=!1,R())})}function j(){return w(this,null,function*(){let h=e(A).selectAddress;if(e(p).status===0){let y=yield M(I(F({},h),{status:3,id:e(p).id,receiveMan:E.username,handleMan:E.username}));return y.code===200&&R(),y.code===200}})}return(h,y)=>{const q=le;return D(),N(U,null,[t(e(re),{columns:e(B),dataSource:e(J),canResize:d.value,loading:n.value,showTableSetting:"",pagination:u,tableSearchQuery:{pageNum:1,pageSize:50},api:e(g),useSearchForm:"",columnSelectInit:{selectable:K,initSelectRows:[1,2,3]},rowSelection:{type:"checkbox"},onColumnsChange:C,onRegister:e($)},{"col-operate":a(({row:Q,column:ye})=>[t(q,{size:"small",type:"primary",onClick:Ae=>i(Q)},{default:a(()=>[ge]),_:2},1032,["onClick"])]),_:1},8,["columns","dataSource","canResize","loading","pagination","api","columnSelectInit","onRegister"]),t(e(ce),{ref_key:"modalRef",ref:_,height:600,footerBtnOption:e(m),showCancelBtn:e(b),showOkBtn:e(l),closeFunc:j,onOk:L},{default:a(()=>[t(be,{ref_key:"messageRef",ref:A,applyItem:e(p)},null,8,["applyItem"])]),_:1},8,["footerBtnOption","showCancelBtn","showOkBtn"])],64)}}});export{Ge as default};
