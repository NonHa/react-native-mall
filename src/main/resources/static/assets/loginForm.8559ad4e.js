var _=(F,e,s)=>new Promise((i,c)=>{var m=o=>{try{u(s.next(o))}catch(n){c(n)}},p=o=>{try{u(s.throw(o))}catch(n){c(n)}},u=o=>o.done?i(o.value):Promise.resolve(o.value).then(m,p);u((s=s.apply(F,e)).next())});import{d as V,r as k,a as w,u as A,b as C,o as D,c as M,w as r,e as l,f as y,g as a,h as g,E as N,i as v}from"./index.9ea39232.js";import{E as L,a as S}from"./el-form-item.f36f1992.js";import{u as R}from"./product.2dbecb13.js";import{u as I,a as T}from"./useLogin.302d86a7.js";import"./table.e172cbb0.js";const U=a("div",{class:"title-container"},[a("h3",{class:"title"},"\u4F0A\u767E\u4E3D\u7ECF\u8425\u7BA1\u7406\u7CFB\u7EDF")],-1),z=a("span",{class:"show-pwd"},null,-1),P=a("label",{for:"rememberMe",title:"\u4E0B\u6B21\u4E0D\u9700\u8981\u518D\u767B\u5F55",style:{color:"#6f6f6f","font-weight":"normal",float:"left"}},[a("input",{type:"checkbox",style:{height:"16px",width:"16px"},id:"rememberMe",name:"rememberMe"}),g(" \u8BB0\u4F4F\u5BC6\u7801 ")],-1),$=a("label",{for:"autoLogin",title:"\u81EA\u52A8\u767B\u5F55",style:{color:"#6f6f6f","font-weight":"normal",float:"right"}},[a("input",{type:"checkbox",style:{height:"16px",width:"16px","margin-left":"20px"},id:"autoLogin",name:"autoLogin"}),g(" \u81EA\u52A8\u767B\u5F55 ")],-1),j=g(" \u767B\u5F55 "),Q=V({__name:"loginForm",setup(F){const e=k({password:"",account:""});let s=w(!1);const i=w(),{getFormRules:c}=I(),{validForm:m}=T(i),{notification:p,createErrorModal:u}=A(),o=C(),n=R();function B(){return _(this,null,function*(){yield m(()=>_(this,null,function*(){try{s.value=!0;const t=yield o.login({password:e.password,username:e.account,mode:"none"});t&&(p.success({title:"sys.login.loginSuccessTitle",message:`sys.login.loginSuccessDesc: ${t.realName}`}),n.getAllList())}catch(t){u({title:"sys.api.errorTip",message:t.message||"sys.api.networkExceptionMsg"})}finally{s.value=!1}}))})}return(E,t)=>{const h=N,d=L,x=v,b=S;return D(),M(b,{ref_key:"formRef",ref:i,model:e,class:"login-form",autocomplete:"on","label-position":"left",size:"small",rules:y(c)},{default:r(()=>[U,l(d,{prop:"userName"},{default:r(()=>[l(h,{ref:"userName_input",modelValue:e.account,"onUpdate:modelValue":t[0]||(t[0]=f=>e.account=f),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),l(d,{prop:"password"},{default:r(()=>[l(h,{ref:"password_input",type:"password",modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=f=>e.password=f),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"]),z]),_:1}),l(d,{style:{height:"30px",border:"none"}},{default:r(()=>[P,$]),_:1}),l(x,{loading:y(s),class:"login-btn",size:"small",type:"primary",onClick:B},{default:r(()=>[j]),_:1},8,["loading"])]),_:1},8,["model","rules"])}}});export{Q as default};
