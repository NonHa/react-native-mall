var M=Object.defineProperty,U=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var E=(s,t,a)=>t in s?M(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,y=(s,t)=>{for(var a in t||(t={}))H.call(t,a)&&E(s,a,t[a]);if(w)for(var a of w(t))K.call(t,a)&&E(s,a,t[a]);return s},z=(s,t)=>U(s,q(t));var h=(s,t,a)=>new Promise((_,u)=>{var n=r=>{try{d(a.next(r))}catch(f){u(f)}},C=r=>{try{d(a.throw(r))}catch(f){u(f)}},d=r=>r.done?_(r.value):Promise.resolve(r.value).then(n,C);d((a=a.apply(s,t)).next())});import{d as O,a as g,r as P,di as Q,o as Z,q as j,e as i,w as l,f as e,c8 as G,Z as J,h as S,he as W,hf as X,hg as Y,hh as ee,i as te}from"./index.9ea39232.js";import{E as ae}from"./el-switch.05966c42.js";import{u as oe,B as se}from"./useTable.db1db6c5.js";import{r as ne,B as re}from"./useForm.c467aa96.js";import{f as ie,h as le,b as ue}from"./userData.47e7f627.js";import{B as me}from"./index.4c756888.js";/* empty css               */import"./el-popper.9aa5ade8.js";/* empty css                  */import"./el-input-number.e6179de6.js";import"./check.8d7cf096.js";import"./dateUtil.648bdb8e.js";import"./useWindowSizeFn.4d8673c8.js";import"./onMountedOrActivated.21e8b91f.js";import"./el-divider.c329bdb5.js";import"./sortable.esm.6991fe44.js";import"./log.b69fc4f1.js";import"./uniqBy.067f2c9d.js";import"./el-form-item.f36f1992.js";import"./uniq.030252d7.js";/* empty css                 */import"./el-space.f4d2670a.js";const ce=S("\u65B0\u589E"),fe=S("\u7F16\u8F91"),de=S("\u5220\u9664"),Le=O({__name:"resource",setup(s){return h(this,null,function*(){let t,a;const _=g(!1),u=g(!1),n=g({}),C=g(!1),d=P({pageSize:10,pageNum:1});let r=W;function f(o){n.value=o&&o.id?o:{status:1},e(u).visibleRef=!0}function T(o){}const[V,B]=ne();function x(){}let v=le();v[1].editEvnets={input:x};let F=g([]),{data:A}=([t,a]=Q(()=>X({})),t=yield t,a(),t);F.value=ie(A.list.map(o=>({label:o.name,value:o.id})));const[N,{getForm:pe,reload:k}]=oe({api:r,columns:v,useSearchForm:!0,formConfig:y({},ue()),showTableSetting:!0,tableSetting:{fullScreen:!0},showIndexColumn:!1,rowKey:"key",isTreeTable:!0});function D(o){return h(this,null,function*(){return n.value=o,e(n).status=e(n).status===0?1:0,yield b()})}let b=o=>h(this,null,function*(){if(e(n).id){let m=o?z(y({},B.getFieldsValue()),{id:e(n).id}):e(n);yield Y(m).then(p=>{if(p)return e(u).visibleRef=!1,k(),!0})}else ee(B.getFieldsValue()).then(m=>{if(m)return e(u).visibleRef=!1,k(),!0});return!1});function $(o,m){n.value=o,e(n).status=0,b()}let I=[];return(o,m)=>{const p=te;return Z(),j(J,null,[i(e(se),{titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:e(v),dataSource:e(I),canResize:_.value,loading:C.value,showTableSetting:"",pagination:d,tableSearchQuery:{pageNum:1,pageSize:50},api:e(r),useSearchForm:"",onColumnsChange:T,onRegister:e(N)},{"form-advanceBefore":l(()=>[i(p,{type:"danger",onClick:f},{default:l(()=>[ce]),_:1})]),"col-operate":l(({row:c,column:L})=>[i(p,{size:"small",type:"primary",onClick:R=>f(c)},{default:l(()=>[fe]),_:2},1032,["onClick"]),i(e(G),{title:"Are you sure to delete this?",onConfirm:R=>$(c)},{reference:l(()=>[i(p,{size:"small",type:"danger"},{default:l(()=>[de]),_:1})]),_:2},1032,["onConfirm"])]),"col-status":l(({row:c,column:L})=>[i(e(ae),{modelValue:c.status,"onUpdate:modelValue":R=>c.status=R,class:"ml-2","active-value":1,"inactive-value":0,"before-change":()=>D(c)},null,8,["modelValue","onUpdate:modelValue","before-change"])]),_:1},8,["columns","dataSource","canResize","loading","pagination","api","onRegister"]),i(e(me),{ref_key:"modalRef",ref:u,onOk:m[0]||(m[0]=c=>e(b)("edit"))},{default:l(()=>[i(e(re),{onRegister:e(V),model:n.value,schemas:e(F),showActionBtn:!1},null,8,["onRegister","model","schemas"])]),_:1},512)],64)}})}});export{Le as default};
