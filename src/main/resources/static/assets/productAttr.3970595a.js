var Q=Object.defineProperty,Z=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var P=(l,o,r)=>o in l?Q(l,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[o]=r,A=(l,o)=>{for(var r in o||(o={}))J.call(o,r)&&P(l,r,o[r]);if(E)for(var r of E(o))U.call(o,r)&&P(l,r,o[r]);return l},M=(l,o)=>Z(l,G(o));import{d as W,a as n,r as X,o as R,q as Y,e as i,w as t,f as e,c8 as $,c as x,s as ee,Z as te,h as c,i as oe}from"./index.9ea39232.js";import{u as ae,B as D}from"./useTable.db1db6c5.js";import{r as ie,B as N}from"./useForm.c467aa96.js";import{B as O}from"./index.4c756888.js";import{d as V,e as re,c as se}from"./tableData.a4ed2d38.js";import{a as le,j as ne,k as ue,l as ce,m as de,n as me}from"./table.e172cbb0.js";/* empty css               */import"./el-popper.9aa5ade8.js";/* empty css                  */import"./el-input-number.e6179de6.js";import"./el-switch.05966c42.js";import"./check.8d7cf096.js";import"./dateUtil.648bdb8e.js";import"./useWindowSizeFn.4d8673c8.js";import"./onMountedOrActivated.21e8b91f.js";import"./el-divider.c329bdb5.js";import"./sortable.esm.6991fe44.js";import"./log.b69fc4f1.js";import"./uniqBy.067f2c9d.js";import"./el-form-item.f36f1992.js";import"./uniq.030252d7.js";/* empty css                 */import"./el-space.f4d2670a.js";const fe=c("\u65B0\u589E"),pe=c("\u5C5E\u6027\u5217\u8868"),ge=c("\u53C2\u6570\u5217\u8868"),_e=c("\u7F16\u8F91"),he=c("\u5220\u9664"),Ae=c("\u65B0\u589E"),Ce=c("\u7F16\u8F91"),ve=c("\u5220\u9664"),Qe=W({__name:"productAttr",setup(l){const o=n(!1),r=n(!1),I=X({pageSize:10,pageNum:1});let b=le,g=n(),C=n(),d=n(1);const m=n({}),L=n({});function v(a){m.value=a,d.value=1,e(g).visibleRef=!0}let k=re();const[y,F]=ie(),[H,{getForm:ke,reload:B}]=ae({api:b,columns:k,useSearchForm:!0,formConfig:A({},se()),showTableSetting:!0,tableSetting:{fullScreen:!0},showIndexColumn:!1,rowKey:"key",isTreeTable:!0});function S(a){e(d)===1?ne(a.id).then(f=>{B()}):ue({id:a.id}).then(f=>{h(m,e(_))})}let j=[],z=()=>{e(d)===1?ce(A({},F.getFieldsValue())).then(a=>{a&&(e(g).visibleRef=!1,B())}):de(M(A({},F.getFieldsValue()),{productAttributeCategoryId:e(m).id,type:e(_)})).then(a=>{a&&(e(C).visibleRef=!1,h(m,e(_)))})};const _=n(0);let T=n([]),h=(a,f)=>{_.value=f,me(e(a).id,{page:1,pageSize:10,type:f}).then(s=>{s&&(d.value=2,T.value=s.data.list,e(g).visibleRef=!0)})};const q=a=>{e(C).visibleRef=!0},K=a=>{m.value=a};return(a,f)=>{const s=oe;return R(),Y(te,null,[i(e(D),{title:"\u57FA\u7840\u793A\u4F8B",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:e(k),dataSource:e(j),canResize:o.value,loading:r.value,showTableSetting:"",pagination:I,tableSearchQuery:{pageNum:1,pageSize:50},api:e(b),useSearchForm:"",onRegister:e(H),onRowClick:K},{"form-advanceAfter":t(()=>[i(s,{type:"danger",onClick:v},{default:t(()=>[fe]),_:1})]),"col-set":t(({row:u,column:w})=>[i(s,{size:"small",onClick:p=>e(h)(u,0)},{default:t(()=>[pe]),_:2},1032,["onClick"]),i(s,{size:"small",onClick:p=>e(h)(u,1)},{default:t(()=>[ge]),_:2},1032,["onClick"])]),"col-oprate":t(({row:u,column:w})=>[i(s,{size:"small",type:"primary",onClick:p=>v(u)},{default:t(()=>[_e]),_:2},1032,["onClick"]),i(e($),{title:"Are you sure to delete this?",onConfirm:p=>S(u)},{reference:t(()=>[i(s,{size:"small",type:"danger"},{default:t(()=>[he]),_:1})]),_:2},1032,["onConfirm"])]),_:1},8,["columns","dataSource","canResize","loading","pagination","api","onRegister"]),i(e(O),{ref_key:"modalRef",ref:g,onOk:e(z),height:500},{default:t(()=>[e(d)===1?(R(),x(e(N),{key:0,onRegister:e(y),model:m.value,schemas:e(V),showActionBtn:!1},null,8,["onRegister","model","schemas"])):e(d)===2?(R(),x(e(D),{key:1,title:"\u57FA\u7840\u793A\u4F8B",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:e(k),dataSource:e(T),canResize:o.value,loading:r.value,showTableSetting:"",useSearchForm:"",height:"300"},{"form-advanceAfter":t(()=>[i(s,{type:"danger",onClick:q},{default:t(()=>[Ae]),_:1})]),"col-oprate":t(({row:u,column:w})=>[i(s,{size:"small",type:"primary",onClick:p=>v(u)},{default:t(()=>[Ce]),_:2},1032,["onClick"]),i(e($),{title:"Are you sure to delete this?",onConfirm:p=>S(u)},{reference:t(()=>[i(s,{size:"small",type:"danger"},{default:t(()=>[ve]),_:1})]),_:2},1032,["onConfirm"])]),_:1},8,["columns","dataSource","canResize","loading"])):ee("",!0)]),_:1},8,["onOk"]),i(e(O),{ref_key:"attrModalRef",ref:C,onOk:e(z),height:500},{default:t(()=>[i(e(N),{onRegister:e(y),model:L.value,schemas:e(V),showActionBtn:!1},null,8,["onRegister","model","schemas"])]),_:1},8,["onOk"])],64)}}});export{Qe as default};
