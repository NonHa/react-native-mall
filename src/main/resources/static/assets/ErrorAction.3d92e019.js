var h=Object.defineProperty,C=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var g=(o,t,r)=>t in o?h(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,u=(o,t)=>{for(var r in t||(t={}))A.call(t,r)&&g(o,r,t[r]);if(c)for(var r of c(t))R.call(t,r)&&g(o,r,t[r]);return o},L=(o,t)=>C(o,I(t));import{k as S,bH as k,aK as x,d as O,aN as d,aM as f,fy as m,b3 as b,p as B,o as J,c as N,w as l,e as p,hA as P}from"./index.9ea39232.js";import"./el-popper.9aa5ade8.js";/* empty css                 */import{b as $}from"./dateUtil.648bdb8e.js";var E=(o=>(o.VUE="vue",o.SCRIPT="script",o.RESOURCE="resource",o.AJAX="ajax",o.PROMISE="promise",o))(E||{});const j=S({id:"app-error-log",state:()=>({errorLogInfoList:null,errorLogListCount:0}),getters:{getErrorLogInfoList(){return this.errorLogInfoList||[]},getErrorLogListCount(){return this.errorLogListCount}},actions:{addErrorLogInfo(o){const t=L(u({},o),{time:$()});this.errorLogInfoList=[t,...this.errorLogInfoList||[]],this.errorLogListCount+=1},setErrorLogListCount(o){this.errorLogListCount=o},addAjaxErrorInfo(o){const{useErrorHandle:t}=k;if(!t)return;const r={message:o.message,type:E.AJAX};if(o.response){const{config:{url:e="",data:a="",method:i="get",headers:s={}}={},data:n={}}=o.response;r.url=e,r.name="Ajax Error!",r.file="-",r.stack=JSON.stringify(n),r.detail=JSON.stringify({params:a,method:i,headers:s})}this.addErrorLogInfo(r)}}}),v=O({name:"ErrorAction",components:{Icon:d,ElTooltip:f,ElBadge:m},setup(){const{push:o}=b(),t=j(),r=B(()=>t.getErrorLogListCount);function e(){o(P.ERROR_LOG_PAGE).then(()=>{t.setErrorLogListCount(0)})}return{getCount:r,handleToErrorList:e}}});function D(o,t,r,e,a,i){const s=d,n=m,_=f;return J(),N(_,{title:"tooltipErrorLog",placement:"bottom",mouseEnterDelay:.5,onClick:o.handleToErrorList},{default:l(()=>[p(n,{"is-dot":""},{default:l(()=>[p(s,{icon:"ion:bug-outline"})]),_:1})]),_:1},8,["mouseEnterDelay","onClick"])}var M=x(v,[["render",D]]);export{M as default};
