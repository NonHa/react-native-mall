var _=(F,e,t)=>new Promise((i,c)=>{var m=o=>{try{n(t.next(o))}catch(u){c(u)}},p=o=>{try{n(t.throw(o))}catch(u){c(u)}},n=o=>o.done?i(o.value):Promise.resolve(o.value).then(m,p);n((t=t.apply(F,e)).next())});import{d as b,r as V,a as y,u as C,b as k,o as N,c as v,w as r,e as l,f as w,g as a,h as A,i as g,E as D,j as M}from"./index.1d7aec97.js";import{E as L,a as R}from"./el-form-item.97ac59b2.js";import{u as S,a as T}from"./useLogin.0a1f09e9.js";const I=a("div",{class:"title-container"},[a("h3",{class:"title"},"\u4F0A\u767E\u4E3D\u7ECF\u8425\u7BA1\u7406\u7CFB\u7EDF")],-1),U=a("span",{class:"show-pwd"},[A(` <svg-icon :icon-class="passwordType === 'password' ? 'eye' : 'eye-open'" /> `)],-1),z=a("label",{for:"rememberMe",title:"\u4E0B\u6B21\u4E0D\u9700\u8981\u518D\u767B\u5F55",style:{color:"#6f6f6f","font-weight":"normal",float:"left"}},[a("input",{type:"checkbox",style:{height:"16px",width:"16px"},id:"rememberMe",name:"rememberMe"}),g(" \u8BB0\u4F4F\u5BC6\u7801 ")],-1),$=a("label",{for:"autoLogin",title:"\u81EA\u52A8\u767B\u5F55",style:{color:"#6f6f6f","font-weight":"normal",float:"right"}},[a("input",{type:"checkbox",style:{height:"16px",width:"16px","margin-left":"20px"},id:"autoLogin",name:"autoLogin"}),g(" \u81EA\u52A8\u767B\u5F55 ")],-1),j=g(" \u767B\u5F55 "),K=b({__name:"loginForm",setup(F){const e=V({password:"",account:""});let t=y(!1);const i=y(),{getFormRules:c}=S(),{validForm:m}=T(i),{notification:p,createErrorModal:n}=C(),o=k();function u(){return _(this,null,function*(){yield m(()=>_(this,null,function*(){try{t.value=!0;const s=yield o.login({password:e.password,username:e.account,mode:"none"});s&&p.success({title:"sys.login.loginSuccessTitle",message:`sys.login.loginSuccessDesc: ${s.realName}`})}catch(s){n({title:"sys.api.errorTip",message:s.message||"sys.api.networkExceptionMsg"})}finally{t.value=!1}}))})}return(B,s)=>{const h=D,d=L,E=M,x=R;return N(),v(x,{ref_key:"formRef",ref:i,model:e,class:"login-form",autocomplete:"on","label-position":"left",size:"small",rules:w(c)},{default:r(()=>[I,l(d,{prop:"userName"},{default:r(()=>[l(h,{ref:"userName_input",modelValue:e.account,"onUpdate:modelValue":s[0]||(s[0]=f=>e.account=f),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),l(d,{prop:"password"},{default:r(()=>[l(h,{ref:"password_input",type:"password",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=f=>e.password=f),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"]),U]),_:1}),l(d,{style:{height:"30px",border:"none"}},{default:r(()=>[z,$]),_:1}),l(E,{loading:w(t),class:"login-btn",size:"small",type:"primary",onClick:u},{default:r(()=>[j]),_:1},8,["loading"])]),_:1},8,["model","rules"])}}});export{K as default};
