<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.non.my_mall.dao.OmsOrderDao">
    <select id="getList" resultMap="com.non.my_mall.mbg.mapper.OmsOrderMapper.BaseResultMap">
        select * from oms_order where delete_status = 0
        <if test="queryParam.orderSn != null and queryParam.orderSn != ''">
            and order_sn = #{queryParam.orderSn}
        </if>
        <if test="queryParam.status != null and queryParam.status != ''">
            and status = #{queryParam.status}
        </if>
        <if test="queryParam.orderType != null and queryParam.orderType != ''">
            and order_type = #{queryParam.orderType}
        </if>
        <if test="queryParam.sourceType != null ">
            and source_type = #{queryParam.sourceType}
        </if>
        <if test="queryParam.createTime != null">
            and  create_time like concat(STR_TO_DATE(#{queryParam.createTime},'%Y-%m-%d') , "%")
        </if>
        <if test="queryParam.receiverKeyWord != null and queryParam.receiverKeyWord != ''">
            and (
                receiver_name like concat("%", #{queryParam.receiverKeyWord}, "%")
                or receiver_phone like concat("%", #{queryParam.receiverKeyWord}, "%")
            )
        </if>
    </select>

    <update id="delete">
        update oms_order set delete_status = 1 where id = #{id}
    </update>
</mapper>